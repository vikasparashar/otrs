// begin Core.Agent.Admin.GenericInterfaceWebservice.js
"use strict";var Core=Core||{};Core.Agent=Core.Agent||{};Core.Agent.Admin=Core.Agent.Admin||{};Core.Agent.Admin.GenericInterfaceWebservice=(function(TargetNS){var DialogData=[];TargetNS.HideElements=function(){$('button.HideActionOnChange').parent().hide();$('.HideOnChange').hide();$('.HideLinkOnChange').contents().unwrap();};TargetNS.Init=function(Params){TargetNS.WebserviceID=parseInt(Params.WebserviceID,10);TargetNS.Localization=Params.Localization;if(Params.Action==="Add"){TargetNS.HideElements();}
$('#DeleteButton').bind('click',TargetNS.ShowDeleteDialog);$('#CloneButton').bind('click',TargetNS.ShowCloneDialog);$('#ImportButton').bind('click',TargetNS.ShowImportDialog);$('#ProviderTransportProperties').bind('click',function(){TargetNS.Redirect('Webservice.Transport','ProviderTransportList',{CommunicationType:'Provider'});});$('#RequesterTransportProperties').bind('click',function(){TargetNS.Redirect('Webservice.Transport','RequesterTransportList',{CommunicationType:'Requester'});});$('#OperationList').bind('change',function(){TargetNS.Redirect('Webservice.Operation','OperationList',{OperationType:$(this).val()});});$('#InvokerList').bind('change',function(){TargetNS.Redirect('Webservice.Invoker','InvokerList',{InvokerType:$(this).val()});});$('.HideTrigger').bind('change',function(){TargetNS.HideElements();});};TargetNS.ShowDeleteDialog=function(Event){Core.UI.Dialog.ShowContentDialog($('#DeleteDialogContainer'),TargetNS.Localization.DeleteWebserviceMsg,'240px','Center',true,[{Label:TargetNS.Localization.CancelMsg,Function:function(){Core.UI.Dialog.CloseDialog($('#DeleteDialog'));}},{Label:TargetNS.Localization.DeleteMsg,Function:function(){var Data={Action:'AdminGenericInterfaceWebservice',Subaction:'Delete',WebserviceID:TargetNS.WebserviceID};Core.AJAX.FunctionCall(Core.Config.Get('CGIHandle'),Data,function(Response){if(!Response||!Response.Success){alert(TargetNS.Localization.CommunicationErrorMsg);return;}
Core.App.InternalRedirect({Action:Data.Action,DeletedWebservice:Response.DeletedWebservice});},'json');}}]);Event.stopPropagation();};TargetNS.ShowCloneDialog=function(Event){var CurrentDate,CloneName;Core.UI.Dialog.ShowContentDialog($('#CloneDialogContainer'),TargetNS.Localization.CloneWebserviceMsg,'240px','Center',true);Core.Form.Validate.Init();CurrentDate=new Date();CloneName=$('#Name').val()+"-"+CurrentDate.getTime();$('.CloneName').val(CloneName);$('#CancelCloneButtonAction').bind('click',function(){Core.UI.Dialog.CloseDialog($('#CloneDialog'));});$('#CloneButtonAction').bind('click',function(){$('#CloneForm').submit();});Event.stopPropagation();};TargetNS.ShowImportDialog=function(Event){Core.UI.Dialog.ShowContentDialog($('#ImportDialogContainer'),TargetNS.Localization.ImportWebserviceMsg,'240px','Center',true);Core.Form.Validate.Init();$('#CancelImportButtonAction').bind('click',function(){Core.UI.Dialog.CloseDialog($('#ImportDialog'));});$('#ImportButtonAction').bind('click',function(){$('#ImportForm').submit();});Event.stopPropagation();};TargetNS.Redirect=function(ConfigKey,DataSource,Data){var WebserviceConfigPart,Action,ConfigElement;WebserviceConfigPart=Core.Config.Get(ConfigKey);ConfigElement=$('#'+DataSource).val();if(ConfigElement!==null){Action=WebserviceConfigPart[ConfigElement];$.extend(Data,{Action:Action,Subaction:'Add',WebserviceID:TargetNS.WebserviceID});Core.App.InternalRedirect(Data);}};TargetNS.ShowDeleteActionDialog=function(Event){var LocalDialogData,ActionType,DialogTitle;LocalDialogData=DialogData[$(Event.target).attr('id')];if($(Event.target).hasClass('DeleteOperation')){ActionType='Operation';DialogTitle=TargetNS.Localization.DeleteOperationMsg;}
else{ActionType='Invoker';DialogTitle=TargetNS.Localization.DeleteInvokerMsg;}
Core.UI.Dialog.ShowContentDialog($('#Delete'+ActionType+'DialogContainer'),DialogTitle,'240px','Center',true,[{Label:TargetNS.Localization.CancelMsg,Class:'Primary',Function:function(){Core.UI.Dialog.CloseDialog($('#Delete'+ActionType+'Dialog'));}},{Label:TargetNS.Localization.DeleteMsg,Function:function(){var Data={Action:'AdminGenericInterfaceWebservice',Subaction:'DeleteAction',WebserviceID:TargetNS.WebserviceID,ActionType:LocalDialogData.ActionType,ActionName:LocalDialogData.ActionName};Core.AJAX.FunctionCall(Core.Config.Get('CGIHandle'),Data,function(Response){if(!Response||!Response.Success){alert(TargetNS.Localization.CommunicationErrorMsg);return;}
Core.App.InternalRedirect({Action:Data.Action,Subaction:'Change',WebserviceID:TargetNS.WebserviceID});},'json');Core.UI.Dialog.CloseDialog($('#Delete'+ActionType+'Dialog'));}}]);Event.stopPropagation();Event.preventDefault();};TargetNS.BindDeleteActionDialog=function(Data){DialogData[Data.ElementID]=Data;$(DialogData[Data.ElementID].ElementSelector).bind('click',TargetNS.ShowDeleteActionDialog);};return TargetNS;}(Core.Agent.Admin.GenericInterfaceWebservice||{}));
// end Core.Agent.Admin.GenericInterfaceWebservice.js
